{"version":3,"file":"charge-customer.js","names":["successResponse","errorResponse","Stripe","stripe","chargeCustomer","req","res","customerEmail","customerName","billingAddress","line1","line2","city","state","postal_code","country","customerId","paymentIntent","paymentIntents","create","payment_method","amount","currency","confirm","customer","automatic_payment_methods","enabled","allow_redirects","return_url","receipt_email","error","message"],"sources":["../../src/controllers/charge-customer.js"],"sourcesContent":["import { successResponse, errorResponse } from \"../utils/response.js\";\nimport Stripe from 'stripe';\n\nconst stripe = new Stripe(\"sk_test_51OHMnlSD010bwSLtbxEWBTJYuThpDaWOA6vi3tf7nfBsu6fAVy7magTCmrrw1KNFXLD6k4cGuW6BGly0e8Y4mlfF00yNKUnfCv\");\n\nexport const chargeCustomer = async (req, res) => {\n    try {\n        const customerEmail = \"abc@gmail.com\";\n        const customerName = \"abc\";\n        const billingAddress = {\n            line1: \"14, Xyz\",\n            line2: \"Vkl\",\n            city: \"Erode\",\n            state: \"Tamilnadu\",\n            postal_code: \"630002\",\n            country: \"India\"\n        };\n\n        const customerId = \"cus_PY21lMxQ0BUrKS\";\n\n        let paymentIntent = await stripe.paymentIntents.create({\n            payment_method: \"pm_1OixSVSD010bwSLtXkeSIdln\",\n            amount: 75 * 100,\n            currency: \"inr\",\n            confirm: true,\n            customer: customerId,\n            automatic_payment_methods: {\n                enabled: true,\n                allow_redirects: \"never\"\n            },\n            return_url: \"https://localhost:3000/success\",\n            receipt_email: customerEmail\n        });\n\n        return successResponse(res, 200, \"Payment made\", paymentIntent);\n    } catch (error) {\n        return errorResponse(res, 500, \"Failed to made payment\", { error: error.message });\n    }\n};"],"mappings":"AAAA,SAASA,eAAe,EAAEC,aAAa,QAAQ,sBAAsB;AACrE,OAAOC,MAAM,MAAM,QAAQ;AAE3B,MAAMC,MAAM,GAAG,IAAID,MAAM,CAAC,6GAA6G,CAAC;AAExI,OAAO,MAAME,cAAc,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9C,IAAI;IACA,MAAMC,aAAa,GAAG,eAAe;IACrC,MAAMC,YAAY,GAAG,KAAK;IAC1B,MAAMC,cAAc,GAAG;MACnBC,KAAK,EAAE,SAAS;MAChBC,KAAK,EAAE,KAAK;MACZC,IAAI,EAAE,OAAO;MACbC,KAAK,EAAE,WAAW;MAClBC,WAAW,EAAE,QAAQ;MACrBC,OAAO,EAAE;IACb,CAAC;IAED,MAAMC,UAAU,GAAG,oBAAoB;IAEvC,IAAIC,aAAa,GAAG,MAAMd,MAAM,CAACe,cAAc,CAACC,MAAM,CAAC;MACnDC,cAAc,EAAE,6BAA6B;MAC7CC,MAAM,EAAE,EAAE,GAAG,GAAG;MAChBC,QAAQ,EAAE,KAAK;MACfC,OAAO,EAAE,IAAI;MACbC,QAAQ,EAAER,UAAU;MACpBS,yBAAyB,EAAE;QACvBC,OAAO,EAAE,IAAI;QACbC,eAAe,EAAE;MACrB,CAAC;MACDC,UAAU,EAAE,gCAAgC;MAC5CC,aAAa,EAAEtB;IACnB,CAAC,CAAC;IAEF,OAAOP,eAAe,CAACM,GAAG,EAAE,GAAG,EAAE,cAAc,EAAEW,aAAa,CAAC;EACnE,CAAC,CAAC,OAAOa,KAAK,EAAE;IACZ,OAAO7B,aAAa,CAACK,GAAG,EAAE,GAAG,EAAE,wBAAwB,EAAE;MAAEwB,KAAK,EAAEA,KAAK,CAACC;IAAQ,CAAC,CAAC;EACtF;AACJ,CAAC"}